# Backend Auth Service

–ü—Ä–æ–µ–∫—Ç –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –≤ —Ä–∞–º–∫–∞—Ö —Å—Ç–∞–∂–∏—Ä–æ–≤–∫–∏.

–ó–¥–µ—Å—å –∂–∏–≤—É—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ä–æ–ª–∏ –∏ —Ç–æ–∫–µ–Ω—ã (À∂‚Ä¢ ÷ä ‚Ä¢À∂)

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **–§—Ä–µ–π–º–≤–æ—Ä–∫:** [NestJS](https://nestjs.com/)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** [PostgreSQL](https://www.postgresql.org/)
- **ORM:** [Objection.js](https://vincit.github.io/objection.js/) + [Knex](http://knexjs.org/)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [Swagger](https://swagger.io/)
- **–õ–∏–Ω—Ç–µ—Ä—ã:** [ESLint](https://eslint.org/) + [Prettier](https://prettier.io/)

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
```bash
npm install
```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env.example` –≤ `.env`:
```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª, —É—Å—Ç–∞–Ω–æ–≤–∏–≤ –Ω—É–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
```env
POSTGRES_PORT=5432
POSTGRES_HOST=localhost
POSTGRES_USER=backend_auth_db_user
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DB=backend_auth_db

GOD_USER_EMAIL=god@system.local
GOD_USER_PASSWORD=Arrive.Slabs.Doubt.Research7
JWT_SECRET=DO NOT USE THIS VALUE. INSTEAD, CREATE A COMPLEX SECRET AND KEEP IT SAFE
JWT_ACCESS_TOKEN_EXPIRES_IN=15m
JWT_REFRESH_TOKEN_EXPIRES_IN=7d
```

3. **–ó–∞–ø—É—Å–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL):**
```bash
docker-compose up -d
```

4. **–ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
```bash
npx knex migrate:latest
```

5. **–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (seeds):**
```bash
npx knex seed:run
```

6. **–ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
```bash
npm run start:dev
```

7. **–ü—Ä–æ—Å–º–æ—Ç—Ä API –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (Swagger):**
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ swagger –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost:3000/api](http://localhost:3000/api) (–≤ —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –Ω–µ –º–µ–Ω—è–ª–∏ –ø–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö

ERD:

![Database Schema](./docs/database-schema.png)

[–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é —Å—Ö–µ–º—É –Ω–∞ dbdiagram.io](https://dbdiagram.io/d/691c15f16735e111704fbe16)

–ö–ª—é—á–µ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏:
- **ServiceUser** - –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏/–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã —Å–µ—Ä–≤–∏—Å–∞.
- **Application** - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏.
- **ApplicationUser** - –ö–æ–Ω–µ—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –≤ —Ä–∞–º–∫–∞—Ö Application).
- **ApplicationRole / ApplicationPermission** - –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

### –°–ª–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Objection.js:

- **–ú–æ–¥–µ–ª–∏ (Models):** –û–ø—Ä–µ–¥–µ–ª—è—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü –∏ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –Ω–∏–º–∏
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (Repositories):** –ò–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É—é—Ç –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å –ë–î
- **DatabaseModule:** –ì–ª–æ–±–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π –¥–æ—Å—Ç—É–ø –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º

–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:
- `ServiceUsersRepository` - —Ä–∞–±–æ—Ç–∞ —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏
- `AppsRepository` - —Ä–∞–±–æ—Ç–∞ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏
- `AppUsersRepository` - —Ä–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- `AppRolesRepository` - —Ä–∞–±–æ—Ç–∞ —Å —Ä–æ–ª—è–º–∏
- `AppPermissionsRepository` - —Ä–∞–±–æ—Ç–∞ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏

## –ó–∞–¥–∞–Ω–∏—è –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞

| **–ó–∞–¥–∞–Ω–∏–µ** | **–î–µ–¥–ª–∞–π–Ω** | **–°—Ç–∞—Ç—É—Å** |
| --- | --- | --- |
| –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞, ERD, –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è REST API | 30/11/25 | ***–í—ã–ø–æ–ª–Ω–µ–Ω–æ!*** |
| –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å –ë–î | 10/12/25 | ***–í—ã–ø–æ–ª–Ω–µ–Ω–æ!*** |
| –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ | 18/01/26 | ***–í –ü—Ä–æ—Ü–µ—Å—Å–µ!*** |
| –ù–∞–ø–∏—Å–∞–Ω–∏–µ —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤ | 23/01/26 | ***–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ*** |
| –†–µ–∞–ª–∏–∑–∞—Ü–∏—è GraphQL | 3/02/26 | ***–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ*** |

## –ü–æ—Å–ª–µ—Å–ª–æ–≤–∏–µ

–ü—Ä–æ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ä–∞–º–∫–∞—Ö —Å—Ç–∞–∂–∏—Ä–æ–≤–∫–∏. README –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∏ –¥–æ–ø–æ–ª–Ω—è—Ç—å—Å—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º.
–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ! –ò –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–≥–æ –¥–Ω—è êîå’û. .’ûê¶Ø

![thx!!!](./images/thanks.jpg)
